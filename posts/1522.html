
<!DOCTYPE html>
<html lang="zh-cn" class="loading">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>正则表达式基础 - xuan&#39;s blog</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="xuan,"> 
    <meta name="description" content="正则表达式就是用某种模式去匹配一类字符串的一种公式。简单记录一下正则表达式的规则。
元字符


元字符
描述




.
匹配除换行符意外的任意字符


\w
匹配字母或数字或下划线或汉字


\s,"> 
    <meta name="author" content="xuan"> 
    <link rel="alternative" href="atom.xml" title="xuan&#39;s blog" type="application/atom+xml"> 
    <link rel="icon" href="/img/xuan-favicon.ico"> 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
<link rel="stylesheet" href="/css/prism-base16-ateliersulphurpool.light.css" type="text/css"></head>
</html>
<body class="loading">
    <span id="config-title" style="display:none">xuan&#39;s blog</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;" data-url="http://qsxuan.com"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">正则表达式基础</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">正则表达式基础</h1>
        <div class="stuff">
            <span>十月 15, 2016</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/正则表达式/">正则表达式</a></li></ul>


        </div>
        <div class="content markdown">
            <p>正则表达式就是用某种模式去匹配一类字符串的一种公式。简单记录一下正则表达式的规则。</p>
<h1 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h1><table>
<thead>
<tr>
<th style="text-align:left">元字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.</td>
<td>匹配除换行符意外的任意字符</td>
</tr>
<tr>
<td style="text-align:left">\w</td>
<td>匹配字母或数字或下划线或汉字</td>
</tr>
<tr>
<td style="text-align:left">\s</td>
<td>匹配任意空白符</td>
</tr>
<tr>
<td style="text-align:left">\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td style="text-align:left">\b</td>
<td>匹配单词的开始或结束</td>
</tr>
<tr>
<td style="text-align:left">^</td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td>匹配字符串的结束</td>
</tr>
<tr>
<td style="text-align:left">-</td>
<td>表示范围</td>
</tr>
<tr>
<td style="text-align:left">[]</td>
<td>匹配括号中的任意一个字符</td>
</tr>
<tr>
<td style="text-align:left">()</td>
<td>分组</td>
</tr>
<tr>
<td style="text-align:left">&verbar;</td>
<td>分支</td>
</tr>
<tr>
<td style="text-align:left">* + ? {}</td>
<td>量词</td>
</tr>
</tbody>
</table>
<h1 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h1><table>
<thead>
<tr>
<th>限定代码/语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>重复0次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复1次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复0次或1次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n到m次</td>
</tr>
</tbody>
</table>
<h1 id="匹配规则"><a href="#匹配规则" class="headerlink" title="匹配规则"></a>匹配规则</h1><h2 id="字符组"><a href="#字符组" class="headerlink" title="字符组"></a>字符组</h2><p><code>[]</code> 匹配括号中的任意一个字符</p>
<p><code>[aeiou]</code> 匹配任何一个英文元音字母</p>
<p><code>c[aou]t</code> 匹配“cat”、“cot”、“cut”这三个单词，而“caout”则不匹配</p>
<p><code>[0-9]</code> 匹配一位数字，等同于<code>\d</code></p>
<h2 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h2><p>需要匹配元字符本身时，使用 <code>\</code> 转义 </p>
<p><code>\.</code> 匹配“.”  </p>
<h2 id="反义"><a href="#反义" class="headerlink" title="反义"></a>反义</h2><table>
<thead>
<tr>
<th>常用反义</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>\W</td>
<td>匹配任意不是字母或数字或下划线或汉字的字符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任意不是任意空白符的字符</td>
</tr>
<tr>
<td>\D</td>
<td>匹配任意非数字的字符</td>
</tr>
<tr>
<td>\B</td>
<td>匹配不是单词的开始或结束的位置</td>
</tr>
<tr>
<td>[^aeiou]</td>
<td>匹配除了aeiou这几个字母以外的任意字符</td>
</tr>
</tbody>
</table>
<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><p><code>|</code> 表示分支，即可能存在的多钟情况</p>
<p><code>aa|bb</code> 匹配“aa”、“bb”，但不匹配“aabb”。  </p>
<h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><p><code>()</code> 可用来分组，简单的用法是表示一个整体。</p>
<p><code>(c|to)at</code> 匹配“cat”、“toat”。</p>
<p> 其他用法如下表：</p>

<table>
    <thead>
        <tr>
            <th>类别</th>
            <th>代码 / 语法</th>
            <th>描述</th></tr>
    </thead>
    <tbody>
        <tr>
            <td rowspan="3">捕获</td>
            <td>(exp)</td>
            <td>匹配 exp，并捕获文本到自动命名的组里</td></tr>
        <tr>
            <td>(?&lt;name&gt;exp)/(?'name'exp)</td>
            <td>匹配 exp，并捕获文本到名称为 name 的组里</td></tr>
        <tr>
            <td>(?:exp)</td>
            <td>匹配 exp，不捕获匹配的文本，也不给此分组分配组号</td></tr>
        <tr>
            <td rowspan="4">零宽断言</td>
            <td>(?=exp)</td>
            <td>匹配 exp 前面的位置</td></tr>
        <tr>
            <td>(?&lt;=exp)</td>
            <td>匹配 exp 后面的位置</td></tr>
        <tr>
            <td>(?!exp)</td>
            <td>匹配后面跟的不是 exp 的位置</td></tr>
        <tr>
            <td>(?&lt;!exp)</td>
            <td>匹配前面不是 exp 的位置</td></tr>
        <tr>
            <td>注释</td>
            <td>(?#comment)</td>
            <td>提供注释辅助阅读，不对正则表达式产生任何影响</td></tr>
    </tbody>
</table>
 
<h2 id="反向引用"><a href="#反向引用" class="headerlink" title="反向引用"></a>反向引用</h2><p>反向引用用于重复搜索前面某个分组匹配的文本</p>
<p><code>\b(\w+)\b\s+\1\b</code> 匹配重复的单词，如“go go”。其中<code>\1</code>表示分组1中捕获的内容，即<code>(\w+)</code> </p>
<p><code>\b(?&lt;word&gt;\w+)\b\s+\k&lt;word&gt;\b</code> 或<code>\b(?&lt;word&gt;\w+)\b\s+\k&#39;word&#39;\b</code> 也可  </p>
<h2 id="环视"><a href="#环视" class="headerlink" title="环视"></a>环视</h2><p>断言用来声明一个应该为真的事实。正则表达式中，只有当断言为真时才会继续进行匹配。<strong>断言匹配的是一个事实，而不是内容。</strong>这里说的4个断言，用于查找在某些内容（但并不包括这些内容）之前或之后，也就是一个位置应该满足的一定条件（即断言），因此也称为零宽断言。</p>
<p><strong>1. 顺序肯定环视 (?=exp)</strong></p>
<p>断言自身出现位置的后面能匹配表达式exp</p>
<p><code>\b\w+(?=ing\b)</code> 匹配“I’m <span style="background-color: #81d4fa;">sing</span>ing while you’re <span style="background-color: #81d4fa;">danc</span>ing.”，即以ing结尾的单词前半部分   </p>
<p><strong>2. 逆序肯定环视 (?&lt;=exp)</strong> </p>
<p>断言自身出现位置的前面能匹配表达式exp</p>
<p><code>(?&lt;=\bre)\w+\b</code> 匹配“re<span style="background-color: #81d4fa;">ading</span> a book”，即以re开头的单词后半部分</p>
<p><code>(?&lt;=\s)\d+(?=\s)</code> 匹配“ <span style="background-color: #81d4fa;">123</span> <span style="background-color: #81d4fa;">456</span> <span style="background-color: #81d4fa;">789</span> ”，即被空白符隔开的数字</p>
<p><code>(?&lt;=&lt;(\w+)&gt;).\*(?=&lt;\/\1&gt;)</code> 匹配“&lt;h1><span style="background-color: #81d4fa;">123</span>&lt;h1>”</p>
<p><strong>3. 顺序否定环视 (?!exp)</strong></p>
<p>断言自身出现位置的后面不能匹配表达式exp </p>
<p><code>\d{3}(?!\d)</code> 匹配“1<span style="background-color: #81d4fa;">234</span>abc”，即3位数字后面不能是数字 </p>
<p><code>\b((?!abc)\w)+\b</code> 匹配“aabc <span style="background-color: #81d4fa;">efghi</span>”，即不包含连续字符abc的单词 </p>
<p><code>^(?:(?!cat).)+$</code> 匹配任意位置都不出现“cat”的字符串   </p>
<p><strong>4. 逆序否定环视 (?&lt;!exp)</strong></p>
<p>断言自身出现位置的前面不能匹配表达式exp</p>
<p><code>(?&lt;!\[a-z\])\d{7}</code> 匹配“a1<span style="background-color: #81d4fa;">2312312</span>3”，即前面不是小写字母的7位数字</p>
<h2 id="贪婪-懒惰匹配"><a href="#贪婪-懒惰匹配" class="headerlink" title="贪婪/懒惰匹配"></a>贪婪/懒惰匹配</h2><p>当正则表达式中包含能接受重复的限定符时，通常的行为是匹配尽可能多的字符。即默认为贪婪匹配。 有时需要匹配尽可能少的字符，也就是懒惰匹配。只需要在量词后面加一个问号。 </p>
<p><code>a.*b</code> 匹配“<span style="background-color: #81d4fa;">aabab</span>”</p>
<p><code>a.*?b</code> 匹配“<span style="background-color: #81d4fa;">aab</span><span style="background-color: #3366ff;">ab</span>”中的两部分</p>
<table>
<thead>
<tr>
<th>懒惰限定符代码/语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>*?</td>
<td>重复0次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td>+?</td>
<td>重复1次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td>??</td>
<td>重复0次或1次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,}?</td>
<td>重复n次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,m}?</td>
<td>重复n到m次，但尽可能少重复</td>
</tr>
</tbody>
</table>
<h1 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h1><p>优先级从上到下、由高到低排列</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>转义符</td>
</tr>
<tr>
<td>() []</td>
<td>括号和中括号</td>
</tr>
<tr>
<td>* + ? {}</td>
<td>量词</td>
</tr>
<tr>
<td>^ $ \anyMateCharacter anyCharacter</td>
<td>定位点和序列</td>
</tr>
<tr>
<td>&verbar;</td>
<td>分支</td>
</tr>
</tbody>
</table>
<h1 id="常用模式"><a href="#常用模式" class="headerlink" title="常用模式"></a>常用模式</h1><p>可用 <code>(?model)exp</code> 开启，只对其后面的字符起作用。php中还可以使用 <code>%exp%model</code> 、<code>/exp/model</code> 、<code>#exp#model</code></p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>忽略大小写模式</td>
</tr>
<tr>
<td>m</td>
<td>多行模式</td>
</tr>
<tr>
<td>s</td>
<td>点号通配模式</td>
</tr>
<tr>
<td>U</td>
<td>懒惰模式</td>
</tr>
<tr>
<td>D</td>
<td>结尾限制，忽略结尾的换行</td>
</tr>
<tr>
<td>u</td>
<td>支持 UTF-8 转义表达</td>
</tr>
</tbody>
</table>
<h1 id="常用正则表达式"><a href="#常用正则表达式" class="headerlink" title="常用正则表达式"></a>常用正则表达式</h1><p>手机号：<code>1[358]\d{9}</code> </p>
<p>邮箱：<code>^[a-z0-9_\-]+(\.[a-z0-9_\-]+)*@([a-z0-9_\-]+\.)+\w{2,6}</code> </p>
<p>HTML标签：<code>&lt;\/?[^&gt;]+&gt;</code> </p>
<p>QQ：<code>[1-9]\d{4,9}</code> </p>
<p>IP：<code>(?:(2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}\1</code> </p>
<p>日期：<code>\d{4}-\d{2}-\d{2}</code></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='http://link.hhtjim.com/163/785902.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
        data-ae='false'
        data-ci='01c2d5f197589b4e803e'
        data-cs='801db12d0bb10bceaddd6a959b4d334d425959dd'
        data-r='xuan-blog'
        data-o='qinshaoxuan'
        data-a='qinshaoxuan'
        data-d='false'
    >查看评论</div>


    </div>
    
        <div class='side'>
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#元字符"><span class="toc-number">1.</span> <span class="toc-text">元字符</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#量词"><span class="toc-number">2.</span> <span class="toc-text">量词</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#匹配规则"><span class="toc-number">3.</span> <span class="toc-text">匹配规则</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#字符组"><span class="toc-number">3.1.</span> <span class="toc-text">字符组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#转义"><span class="toc-number">3.2.</span> <span class="toc-text">转义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#反义"><span class="toc-number">3.3.</span> <span class="toc-text">反义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分支"><span class="toc-number">3.4.</span> <span class="toc-text">分支</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分组"><span class="toc-number">3.5.</span> <span class="toc-text">分组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#反向引用"><span class="toc-number">3.6.</span> <span class="toc-text">反向引用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#环视"><span class="toc-number">3.7.</span> <span class="toc-text">环视</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#贪婪-懒惰匹配"><span class="toc-number">3.8.</span> <span class="toc-text">贪婪/懒惰匹配</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#运算符优先级"><span class="toc-number">4.</span> <span class="toc-text">运算符优先级</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#常用模式"><span class="toc-number">5.</span> <span class="toc-text">常用模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#常用正则表达式"><span class="toc-number">6.</span> <span class="toc-text">常用正则表达式</span></a></li></ol>
        </div>
    
</div>


    </div>
</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
